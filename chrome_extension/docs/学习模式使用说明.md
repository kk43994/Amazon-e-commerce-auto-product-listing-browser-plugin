# 🎓 学习模式使用说明

## 什么是学习模式？

**学习模式**让插件通过**您的指导**来学习亚马逊页面的元素位置，无需开发者手动编码！

---

## 🎯 为什么需要学习模式？

### 问题
- 不同亚马逊站点(日本/美国/欧洲)页面结构不同
- 亚马逊会更新页面，元素ID/Class会变化
- 我没有真实的亚马逊商品上传页面

### 解决方案
**让用户(您)教插件一次，插件永久记住！**

---

## 🚀 使用步骤

### 第1步：打开亚马逊商品上传页面
```
登录亚马逊卖家后台
→ 导航到"添加商品"或"创建新商品"页面
→ 确保页面完全加载
```

### 第2步：启动学习模式
```
点击插件图标
→ 点击"🎯 教插件识别页面元素"按钮
→ 页面会出现遮罩和引导
```

### 第3步：逐个指定字段

插件会依次提示您点击以下字段：

```
1️⃣ 请点击 "商品标题" 输入框
   → 您点击页面上的标题输入框
   → 插件弹出确认对话框
   → 确认正确

2️⃣ 请点击 "品牌" 输入框
   → 点击品牌输入框
   → 确认

3️⃣ 请点击 "价格" 输入框
   ... 以此类推

继续完成：
✓ 商品描述
✓ 库存数量
✓ SKU编号
```

### 第4步：完成
```
所有字段学习完成
→ 插件显示 "🎉 学习完成！"
→ 元素位置已保存
→ 下次自动使用
```

---

## 💡 工作原理

### 插件记录的信息

对每个字段，插件会保存：
```javascript
{
  "title": {
    "id": "product-title",           // 元素ID
    "name": "title",                  // name属性
    "class": ["input-field", "..."], // class列表
    "xpath": "//*[@id='product-title']", // XPath
    "css": "#product-title"          // CSS选择器
  }
}
```

### 下次填写时
```javascript
// 插件会尝试所有保存的定位方式
element = document.getElementById('product-title')  // 尝试ID
       || document.querySelector('[name="title"]')   // 尝试name
       || document.querySelector('#product-title')   // 尝试CSS
       || xpath查找                                   // 尝试XPath
```

---

## 🎨 界面说明

### 遮罩层
- 半透明黑色背景
- 高亮所有可点击的输入框（蓝色虚线）

### 引导框
- 白色居中弹窗
- 显示当前需要点击的字段名
- 例如："📍 请点击 商品标题 输入框"

### 确认对话框
- 显示您选择的元素信息
- ✓ 确认 - 继续下一个字段
- ✗ 重选 - 重新选择当前字段

### 完成提示
- 🎉 大字提示"学习完成"
- 自动保存到浏览器本地存储
- 3秒后自动消失

---

## ⚙️ 存储机制

### 数据保存位置
```javascript
chrome.storage.local
└── learned_sellercentral.amazon.co.jp
    └── {
          hostname: "sellercentral.amazon.co.jp",
          pathname: "/product/add",
          selectors: { ... },
          learnedAt: "2025-11-17T10:00:00Z"
        }
```

### 不同站点分别保存
- 日本站：`learned_sellercentral.amazon.co.jp`
- 美国站：`learned_sellercentral.amazon.com`
- 英国站：`learned_sellercentral.amazon.co.uk`

---

## 🔄 何时需要重新学习？

### 必须重新学习
- ✅ 首次使用插件
- ✅ 切换到新的亚马逊站点
- ✅ 亚马逊更新了页面结构

### 可以重新学习
- ⚠️ 填写失败（元素未找到）
- ⚠️ 想更换元素定位

### 如何重新学习
```
点击插件图标
→ "✓ 已学习 (点击重新学习)" 按钮
→ 重复学习步骤
→ 新数据覆盖旧数据
```

---

## 💻 高级用法

### 控制台手动触发
```javascript
// F12打开控制台
window.learningMode.start()
```

### 查看已学习的数据
```javascript
// 控制台运行
chrome.storage.local.get(null, (data) => {
    console.log('已学习的数据:', data);
});
```

### 清除学习数据
```javascript
// 重新开始
chrome.storage.local.clear(() => {
    console.log('已清除所有学习数据');
});
```

---

## 🐛 故障排查

### Q: 点击后没有反应？
A:
- 检查是否点击了正确的输入框
- 刷新页面重试
- 查看控制台是否有错误

### Q: 确认对话框显示信息为空？
A:
- 该元素可能没有ID/name属性
- 没关系，插件会使用XPath定位
- 点击"确认"继续

### Q: 学习完成后填写仍然失败？
A:
- 检查页面是否与学习时相同
- 尝试重新学习
- 检查控制台错误信息

---

## 📊 与其他方案对比

### 方案A: 硬编码元素ID
```javascript
// ❌ 缺点：
- 需要开发者手动写代码
- 页面变化就失效
- 不同站点需要多套代码
```

### 方案B: 智能猜测
```javascript
// ⚠️ 缺点：
- 可能猜错
- 准确度不高
- 无法处理特殊情况
```

### 方案C: 学习模式 ✅
```javascript
// ✅ 优点：
+ 用户教一次，永久记住
+ 适应任何页面结构
+ 页面变化后重新学习即可
+ 不需要开发者参与
```

---

## 🎯 学习模式的优势

### 1. 通用性
- 适用于任何亚马逊站点
- 适用于任何商品类型的上传页面
- 甚至可以用于其他网站

### 2. 可维护性
- 页面更新后，用户自己重新学习
- 不需要等待开发者更新代码
- 完全自助服务

### 3. 准确性
- 用户手动指定，100%准确
- 不会出现智能猜测的错误
- 支持特殊字段

### 4. 灵活性
- 可以跳过不需要的字段
- 可以学习额外的自定义字段
- 可以随时重新学习

---

## 🔮 未来扩展

学习模式可以扩展支持：

```
✓ 学习图片上传按钮
✓ 学习分类选择器
✓ 学习变体相关字段
✓ 学习自定义属性
✓ 导出/导入学习数据
✓ 多套方案（A/B测试）
```

---

## 📝 总结

**学习模式 = 最佳解决方案**

| 特性 | 评分 |
|------|------|
| 易用性 | ⭐⭐⭐⭐⭐ |
| 准确性 | ⭐⭐⭐⭐⭐ |
| 灵活性 | ⭐⭐⭐⭐⭐ |
| 维护性 | ⭐⭐⭐⭐⭐ |
| 通用性 | ⭐⭐⭐⭐⭐ |

---

**现在就试试吧！** 🚀

1. 打开亚马逊商品上传页面
2. 点击插件图标
3. 点击"🎯 教插件识别页面元素"
4. 跟随引导完成学习
5. 享受自动填写的便利！
